<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Access NCBI's (batch) CD-SEARCH from R. — cdsearchr • seqvisr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Access NCBI's (batch) CD-SEARCH from R. — cdsearchr"><meta property="og:description" content="cdsearchr() provides an R interface for NCBI's CD-SEARCH sequence annotation tool.
It takes the path to a FASTA file containing the query protein sequences as input
and returns a data.frame containing the annotation results."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">seqvisr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/seqvisr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/vragh/seqvisr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Access NCBI's (batch) CD-SEARCH from R.</h1>
    <small class="dont-index">Source: <a href="https://github.com/vragh/seqvisr/blob/HEAD/R/cdsearchr.R" class="external-link"><code>R/cdsearchr.R</code></a></small>
    <div class="hidden name"><code>cdsearchr.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>cdsearchr()</code> provides an <code>R</code> interface for NCBI's CD-SEARCH sequence annotation tool.
It takes the path to a FASTA file containing the query protein sequences as input
and returns a <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> containing the annotation results.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cdsearchr</span><span class="op">(</span>queries <span class="op">=</span> <span class="cn">NA</span>, db <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cdd"</span>, <span class="st">"pfam"</span>, <span class="st">"smart"</span>, <span class="st">"tigrfam"</span>, <span class="st">"cog"</span>, <span class="st">"kog"</span><span class="op">)</span>,</span>
<span>smode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"prec"</span>, <span class="st">"live"</span><span class="op">)</span>, useid1 <span class="op">=</span> <span class="cn">TRUE</span>, compbasedadj <span class="op">=</span> <span class="fl">1</span>,</span>
<span>biascompfilter <span class="op">=</span> <span class="cn">TRUE</span>, evalue <span class="op">=</span> <span class="fl">0.01</span>, tdata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hits"</span>, <span class="st">"aligns"</span>, <span class="st">"feats"</span><span class="op">)</span>,</span>
<span>alnfmt <span class="op">=</span> <span class="cn">NA</span>, dmode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rep"</span>, <span class="st">"std"</span>, <span class="st">"full"</span><span class="op">)</span>, qdefl <span class="op">=</span> <span class="cn">TRUE</span>, cddefl <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>maxhit <span class="op">=</span> <span class="fl">500</span>, check_max <span class="op">=</span> <span class="fl">10</span>, check_wait <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>queries</dt>
<dd><p>(character string, mandatory) path to a FASTA file containing the
query protein sequences.</p></dd>


<dt>db</dt>
<dd><p>(character string, optional) controls which databases CD-SEARCH should
search the queries against. Please refer to "database selection" under the URL
<a href="https://www.ncbi.nlm.nih.gov/Structure/cdd/cdd_help.shtml#BatchRPSBSearchMode" class="external-link">https://www.ncbi.nlm.nih.gov/Structure/cdd/cdd_help.shtml#BatchRPSBSearchMode</a>
for particulars on the databases. This parameter only has an effect if <code>smode</code> is
set to "live" (see below). (Set to "cdd" by default.)</p></dd>


<dt>smode</dt>
<dd><p>(character string, optional) controls which search mode CD-SEARCH
should use. "auto" will check the queries first against a set of precalculated
results (by checking query identifiers; really only works if these are sequences
in NCBI already), and if that fails, it performs a "live" search against the
CD-SEARCH database. "prec" would return results only for queries that have a
result in the precalculated database. "live" will search every query anew against
its databases even if precalculated results exist for that query. (Set to "auto"
by default.)</p></dd>


<dt>useid1</dt>
<dd><p>(binary, optional) controls whether queries should also be
searched against archived sequence identifiers if the query's identifier (if
it happens to be an NCBI identifier) does not match anything in the current
Entrez Protein database records. (Set to TRUE by default.)</p></dd>


<dt>compbasedadj</dt>
<dd><p>(integer, optional) should CD-SEARCH use compositionally-
corrected scoring? (0 - correction turned off; 1 - correction turned on.) (Set
to 1 by default.)</p></dd>


<dt>biascompfilter</dt>
<dd><p>(binary, optional) should compositionally biased regions
of the queries be filtered out? (Set to TRUE by default.)</p></dd>


<dt>evalue</dt>
<dd><p>(numeric, optional) expect value (statistical significance threshold)
used for filtering and reporting annotation matches. (Set to 0.01 by default.)</p></dd>


<dt>tdata</dt>
<dd><p>(character string, optional) what type of target data should be
returned: "hits" (domain hits), "aligns" (domain alignments), or "feats" (domain
features). Changing from the default might break functionality as of the current
version of <code>seqvisr</code>. (Set to "hits" by default.)</p></dd>


<dt>alnfmt</dt>
<dd><p>(character string, optional) data format to be used for downloading
alignment data in the event <code>tmode</code> is set to "aligns". This will never be the
case for cdsearchr, and this option exists only for the sake of completeness.
(Set to <code>NA</code> by default.)</p></dd>


<dt>dmode</dt>
<dd><p>(character string, optional) which data mode must be used for the results.
This dictates what set of domains are returned: the highest scoring hit for each region
of the sequence ("rep"), the best hits from each database available in CD-SEARCH (so multiple
hits per query region are possible; "std"), or all hits ("full"). (Set to "rep" by default.)</p></dd>


<dt>qdefl</dt>
<dd><p>(binary, optional) should query titles be included in the results? (Set to TRUE
by default.)</p></dd>


<dt>cddefl</dt>
<dd><p>(binary, optional) should domain titles be included in the results? (Set to FALSE
by default.)</p></dd>


<dt>maxhit</dt>
<dd><p>(integer, optional) maximum number of results per query that should be retrieved.
Only matters if <code>smode</code> is set to "live".</p></dd>


<dt>check_max</dt>
<dd><p>(numeric, optional) how many times should cdsearchr() query for results before
giving up? (Set to 10 attemps by default.)</p></dd>


<dt>check_wait</dt>
<dd><p>(numeric, optional) how long -- in seconds -- must cdsearchr() wait between
successive requests to the CD-SEARCH API while querying for the results. (Set to 20 by
default.)</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>cdsearchr() is an <code>R</code>-based interface to the NCBI CD-SEARCH application. It uses <code>httr</code> internally
to submit and retrieve data. Once the queries have been submitted, cdsearchr() will repeatedly
query the CD-SEARCH server until it receives a response (success/failure) or the number of attempts
exceeds <code>check_max</code>. Although <code>check_wait</code> has been set to 20 (seconds) it is recommended that the
user adjusts this based on the size of the data set (set to a smaller value for smaller data sets
and vice versa).</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>cdsearchr() respects the CD-SEARCH API's 4000 queries submission limit.
Therefore, users should pre-chunk FASTA files into files of 4000 sequences or
fewer before passing them on cdsearchr.#'</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">inpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"cdsearchr_testdata.fasta"</span>, package <span class="op">=</span> <span class="st">"seqvisr"</span>, mustWork <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cdsearchr</span><span class="op">(</span>queries <span class="op">=</span> <span class="va">inpath</span>, check_wait <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Venket Raghavan.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

